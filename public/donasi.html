<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta name="theme-color" content="#0f172a" />
  <title>Dukungan & Donasi untuk API siputzx - Bantu Kami Tetap Gratis!</title>
  <meta name="description" content="Dukung pengembangan API siputzx melalui donasi. Bantuan Anda membantu kami menyediakan layanan REST API gratis, cepat, dan handal untuk developer Indonesia." />
  <meta name="keywords" content="donasi api siputzx, dukungan api, bantu api gratis, kontribusi developer, rest api indonesia, api gratis indonesia, support api, kontribusi komunitas, donasi developer" />
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <meta name="author" content="siputzx" />
  <meta name="googlebot" content="index, follow" />
  <meta name="google" content="notranslate" />
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="manifest" href="/site.webmanifest" />
  <link rel="alternate" href="https://api.siputzx.my.id/donasi" hreflang="id-ID" />

  <!-- Open Graph -->
  <meta property="og:title" content="Donasi untuk API siputzx - Dukung API Gratis untuk Developer" />
  <meta property="og:description" content="Bantu menjaga layanan API siputzx tetap berjalan. Donasi Anda sangat berarti bagi komunitas developer Indonesia." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://api.siputzx.my.id/donasi" />
  <meta property="og:site_name" content="API siputzx" />
  <meta property="og:locale" content="id_ID" />
  <meta property="og:image" content="https://api.siputzx.my.id/images/donasi-og.png" />
  <meta property="og:image:alt" content="Ilustrasi Donasi API siputzx" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Donasi API siputzx - Dukung Developer Indonesia" />
  <meta name="twitter:description" content="Donasi Anda membantu API siputzx tetap tersedia secara gratis untuk seluruh developer di Indonesia." />
  <meta name="twitter:image" content="https://api.siputzx.my.id/images/donasi-twitter.png" />
  <meta name="twitter:creator" content="@siputzx" />
  <meta name="twitter:site" content="@siputzx" />

  <!-- Schema.org: DonateAction -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "DonateAction",
    "name": "Donasi untuk API siputzx",
    "target": "https://api.siputzx.my.id/donasi",
    "description": "Dukung pengembangan dan pemeliharaan layanan REST API gratis untuk developer Indonesia.",
    "recipient": {
      "@type": "Organization",
      "name": "siputzx",
      "url": "https://api.siputzx.my.id",
      "logo": {
        "@type": "ImageObject",
        "url": "https://api.siputzx.my.id/images/logo.png"
      }
    }
  }
  </script>

  <!-- BreadcrumbList -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://api.siputzx.my.id"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Donasi",
        "item": "https://api.siputzx.my.id/donasi"
      }
    ]
  }
  </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet" />
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <script src="https://app.midtrans.com/snap/snap.js" data-client-key="Mid-client-N95EuTZMbqCa2MPa"></script>
    <style>
      html { scroll-behavior: smooth; }
      body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; }
      .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
      .glass-nav { background: rgba(15, 23, 42, 0.98); backdrop-filter: blur(12px); }
      .glass-card { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
      .glass-card:hover { transform: translateY(-6px); border-color: rgba(59, 130, 246, 0.4); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
      .glow-effect { position: relative; }
      .glow-effect::after { content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px; background: linear-gradient(45deg, #3b82f6, #60a5fa); border-radius: inherit; z-index: -1; opacity: 0; transition: opacity 0.3s ease; }
      .glow-effect:hover::after { opacity: 0.3; }
      .donation-card { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.06); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
      .donation-card:hover { transform: translateY(-5px); border-color: rgba(59, 130, 246, 0.3); }
      .input-focus:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3); }
    </style>
  </head>
  <body class="bg-slate-900 gradient-bg text-white">
    <nav class="fixed w-full z-50 glass-nav">
      <div class="container mx-auto px-4">
        <div class="flex items-center justify-between h-16">
          <div class="text-lg font-medium flex items-center space-x-3">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            <span>siputzx API</span>
          </div>
          <a href="/" class="text-gray-400 hover:text-white transition-colors">Kembali ke Beranda</a>
        </div>
      </div>
    </nav>
    <main class="min-h-screen pt-24 pb-16 flex items-center justify-center">
      <div class="container mx-auto px-4 max-w-4xl">
        <div class="text-center mb-12" data-aos="fade-up">
          <h1 class="text-3xl md:text-4xl font-bold mb-4">Dukung Kami</h1>
          <p class="text-gray-400 max-w-xl mx-auto">Setiap donasi Anda membantu kami menjaga layanan API gratis ini tetap berjalan dan berkembang.</p>
        </div>
        <div class="grid md:grid-cols-2 gap-8">
          <div class="glass-card p-8 rounded-2xl" data-aos="fade-up" data-aos-delay="100">
            <h2 class="text-xl font-semibold mb-6">Form Donasi</h2>
            <form id="donation-form" class="space-y-6">
              <div>
                <label for="name" class="block text-sm font-medium mb-2">Nama</label>
                <input type="text" id="name" name="name" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white input-focus" required />
              </div>
              <div>
                <label for="email" class="block text-sm font-medium mb-2">Email</label>
                <input type="email" id="email" name="email" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white input-focus" required />
              </div>
              <div>
                <label for="amount" class="block text-sm font-medium mb-2">Jumlah Donasi (Rp)</label>
                <input type="number" id="amount" name="amount" min="1000" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white input-focus" required placeholder="Minimal Rp1.000" />
              </div>
              <div>
                <label for="comment" class="block text-sm font-medium mb-2">Komentar (Opsional)</label>
                <textarea id="comment" name="comment" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white input-focus" rows="3" placeholder="Tinggalkan pesan dukungan..."></textarea>
              </div>
              <div class="cf-turnstile" data-sitekey="0x4AAAAAAA6dZGHl6b5dKTOR"></div>
              <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 glow-effect">Donasi Sekarang</button>
            </form>
          </div>
          <div data-aos="fade-up" data-aos-delay="200">
            <h2 class="text-xl font-semibold mb-6">Daftar Donatur</h2>
            <div id="donation-list" class="space-y-4 max-h-[400px] overflow-y-auto"></div>
          </div>
        </div>
      </div>
    </main>
    <footer class="gradient-bg text-white py-8 border-t border-gray-800">
      <div class="container mx-auto px-4 text-center">
        <p class="text-gray-400 text-sm">Â© 2024 siputzx API. Terima kasih atas dukungan Anda!</p>
      </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
      AOS.init({ duration: 800, offset: 100, once: true, mirror: false });

      async function notifyBackend(result) {
        try {
          await fetch('/api/donasi/notify', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              order_id: result.order_id,
              transaction_status: result.status_code === '200' ? 'settlement' : result.status_code === '201' ? 'pending' : 'failed',
              gross_amount: result.gross_amount,
              signature_key: result.signature_key || ''
            })
          });
        } catch (error) {
          console.error('Error notifying backend:', error);
        }
      }

      async function fetchDonationList() {
        try {
          const response = await fetch('/api/donasi/list');
          const data = await response.json();
          if (data.status && data.donations.length > 0) {
            const donationList = document.getElementById('donation-list');
            donationList.innerHTML = '';
            const sortedDonations = data.donations
              .filter(d => d.status === 'success')
              .sort((a, b) => new Date(b.updatedAt || b.createdAt) - new Date(a.updatedAt || a.createdAt));
            sortedDonations.forEach(donation => {
              const donationCard = document.createElement('div');
              donationCard.className = 'donation-card p-4 rounded-2xl';
              donationCard.innerHTML = `
                <div class="flex items-center space-x-4">
                  <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0">
                    <span class="text-white font-medium">${donation.name.charAt(0)}</span>
                  </div>
                  <div class="flex-1">
                    <h4 class="font-medium">${donation.name}</h4>
                    <p class="text-gray-400 text-sm">Rp ${Number(donation.amount).toLocaleString('id-ID')}</p>
                    <p class="text-gray-500 text-xs">${donation.comment || 'Tidak ada komentar'}</p>
                  </div>
                </div>
              `;
              donationList.appendChild(donationCard);
            });
          }
        } catch (error) {
          console.error('Error fetching donation list:', error);
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        fetchDonationList();

        document.getElementById('donation-form').addEventListener('submit', async e => {
          e.preventDefault();
          const formData = {
            name: document.getElementById('name').value.trim(),
            email: document.getElementById('email').value.trim(),
            amount: Number(document.getElementById('amount').value),
            comment: document.getElementById('comment').value.trim(),
            turnstileToken: document.querySelector('.cf-turnstile input[name="cf-turnstile-response"]').value
          };

          if (!formData.turnstileToken) {
            alert('Silakan selesaikan verifikasi keamanan terlebih dahulu');
            return;
          }

          try {
            const response = await fetch('/api/donasi', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(formData)
            });
            const data = await response.json();
            if (data.status) {
              snap.pay(data.token, {
                onSuccess: async result => {
                  await notifyBackend(result);
                  alert('Terima kasih atas donasi Anda!');
                  fetchDonationList();
                },
                onPending: async result => {
                  await notifyBackend(result);
                  alert('Pembayaran Anda sedang diproses. Silakan selesaikan dalam 24 jam.');
                },
                onError: async result => {
                  await notifyBackend(result);
                  alert('Pembayaran gagal. Silakan coba lagi.');
                },
                onClose: () => {
                  console.log('Payment popup closed');
                }
              });
            } else {
              alert(data.error || 'Gagal membuat transaksi donasi');
            }
          } catch (error) {
            console.error('Error submitting donation:', error);
            alert('Terjadi kesalahan saat mengirim donasi. Silakan coba lagi.');
          }
        });
      });
    </script>
  </body>
</html>